<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/uikit.min.css" />
    <script src="js/uikit.min.js"></script>
    <script src="js/uikit-icons.min.js"></script>
    <title>Random chat</title>
    <meta name="description" content="Random Chat: connectez-vous \
    pour discuter avec des ENSTA en toute anonymat..." />
</head>

<body>
    <h1>Bienvenue sur le Random Chat !</h1>
    <!-- connected people live counter -->
    <p id="peopleCounter"></p>
    <!-- change interlocutor button -->
    <button id="changeInterlocutorButton" type="button" onclick="changeInterlocutor()">Changer d'interlocuteur</button>
    <!--list of messages-->
    <ul class="uk-list uk-list-striped" id="messages"></ul>
    <!--form for composing messages-->
    <form class="bottom" id="messageComposer" onSubmit="return false">
        <div class="uk-margin" uk-margin uk-grid>
            <input class="uk-input uk-margin-left uk-width-3-4 uk-box-shadow-hover-small" id="userMessageInputField"
                autocomplete="off" type="text" name="userInput" placeholder="Taper votre message ici">
            <button
                class="uk-button uk-button-primary uk-align-right uk-margin-right uk-width-1-5 uk-box-shadow-hover-medium"
                uk-tooltip="title: Alors ? On hésite ?; delay: 5000" id="sendButton" type="button"
                onclick="sendMessage()">Envoyer</button>
        </div>
    </form>
    <a href="#" uk-totop uk-scroll></a>

    <!-- js -->
    <script src="/socket.io/socket.io.js"></script>
<<<<<<< HEAD
    <script src="js/init.js"></script>
=======

    <script src="/js/init.js">init()</script>
    <!--can't load file, says wrong MIME type... -->
    <!-- <script> -->
    <!--     var socket = io() -->

    <!--     /* callback on id='sendButton' button on click event */ -->
    <!--     function sendMessage() { -->
    <!--         // get the message input element -->
    <!--         let inputField = document.getElementById("userMessageInputField") -->
    <!--         // get its value -->
    <!--         let message = inputField.value -->
    <!--         // do nothing if message is empty -->
    <!--         if (message == "") { -->
    <!--             return false -->
    <!--         } -->
    <!--         // otherwise send it to the room... -->
    <!--         // ... with the saved room number, for simplicity -->
    <!--         socket.emit('chat message', message) -->
    <!--         // ...and empty the input field -->
    <!--         inputField.value = "" -->
    <!--         console.log("Message sent: " + message) -->
    <!--         appendNewMessage(message) -->
    <!--     } -->

    <!--     /* enter key triggers SendButton */ -->
    <!--     function enterKeySendsMessage() { -->
    <!--         document.addEventListener('keydown', (e) => { -->
    <!--             if (e.keyCode === 13) {// "Enter" key code -->
    <!--                 sendMessage() -->
    <!--             } -->
    <!--         }) -->
    <!--     } -->

    <!--     /* Check if user is typing */ -->
    <!--     function userIsTyping() { -->
    <!--         var searchTimeout -->
    <!--         document.getElementById('userMessageInputField').onkeypress = function () { -->
    <!--             if (searchTimeout != undefined) clearTimeout(searchTimeout) -->
    <!--             searchTimeout = setTimeout(function () { -->
    <!--                 socket.emit('user typing') -->
    <!--             }, 250) -->
    <!--         } -->
    <!--     } -->

    <!--     /* update the page to display new message */ -->
    <!--     function appendNewMessage(msg) { -->
    <!--         // get already displayed messages -->
    <!--         let messages = document.getElementById("messages") -->
    <!--         // display new ones -->
    <!--         let new_message = document.createElement('li') -->
    <!--         new_message.appendChild(document.createTextNode(msg)); -->
    <!--         messages.appendChild(new_message) -->
    <!--         window.scrollTo(0, document.body.scrollHeight); -->
    <!--     } -->

    <!--     /* handling newly received messages */ -->
    <!--     function listenToIncomingMessages() { -->
    <!--         socket.on('chat message', (msg) => { -->
    <!--             console.log("Message received: " + msg) -->
    <!--             appendNewMessage(msg) -->
    <!--         }) -->

    <!--         socket.on('user typing', () => { -->
    <!--             console.log('User is typing') -->
    <!--         }) -->
    <!--     } -->

    <!--     /* print the people count */ -->
    <!--     function printPeopleCount() { -->
    <!--         socket.on('greeting', (data) => { -->
    <!--             console.log(data.newcommer + ' just connected to the Random Chat!') -->
    <!--             const count = data.peoplecount + 1 -->
    <!--             let people_counter = document.getElementById("peopleCounter") -->
    <!--             if (count > 1) { -->
    <!--                 people_counter.innerHTML = "Il y a actuellement " + count + " personnes connectées !" -->
    <!--             } else { -->
    <!--                 people_counter.innerHTML = "Vous êtes seul(e)... :'(" -->
    <!--             } -->
    <!--         }) -->
    <!--     } -->

    <!--     /* global logic entry point */ -->
    <!--     function init() { -->
    <!--         // start listening to incom.. -->
    <!--         listenToIncomingMessages() -->
    <!--         // print the people count -->
    <!--         printPeopleCount() -->
    <!--         // respond to "Enter" key press -->
    <!--         enterKeySendsMessage() -->
    <!--         // blabla -->
    <!--         userIsTyping() -->
    <!--     } -->

    <!--     init() // client-side logic starts here -->
    <!-- </script> -->
>>>>>>> 9349599803ca981f8e0891a38b826099fb525a7c
</body>

</html>
